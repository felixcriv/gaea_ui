!function(e){function t(e,t){this.element=e,this.options=t,this.init()}var n=e(window),i=function(e,t,n,i){if(3===arguments.length||i){if(e>n)return e;if(n>t)return t}return n},o=function(e){e.clientX=e.originalEvent.touches[0].clientX,e.clientY=e.originalEvent.touches[0].clientY},a=function(e){var t=(e.css("background-image").match(/^url\(['"]?(.*?)['"]?\)$/i)||[])[1];if(t){var n={width:0,height:0},i=new Image;return i.onload=function(){if("cover"==e.css("background-size")){var t=e.innerWidth(),o=e.innerHeight(),a=t/o;imageAspectRatio=i.width/i.height,scale=1,scale=imageAspectRatio>=a?o/i.height:t/i.width,n.width=i.width*scale,n.height=i.height*scale}else n.width=i.width,n.height=i.height},i.src=t,n}};t.prototype.init=function(){var t=e(this.element),u=(t.css("background-image").match(/^url\(['"]?(.*?)['"]?\)$/i)||[])[1],d=this.options;if(u){var r={width:0,height:0};d.bound&&(r=a(t)),t.on("mousedown.dbg touchstart.dbg",function(e){if(e.target===t[0]){if(e.preventDefault(),e.originalEvent.touches)o(e);else if(1!==e.which)return;var a=e.clientX,u=e.clientY,s=t.css("background-position").match(/(-?\d+).*?\s(-?\d+)/)||[],c=parseInt(s[1])||0,g=parseInt(s[2])||0;n.on("mousemove.dbg touchmove.dbg",function(e){e.preventDefault(),e.originalEvent.touches&&o(e);var n=e.clientX,s=e.clientY;c="y"===d.axis?c:i(t.innerWidth()-r.width,0,c+n-a,d.bound),g="x"===d.axis?g:i(t.innerHeight()-r.height,0,g+s-u,d.bound),a=n,u=s,t.css("background-position",c+"px "+g+"px")}),n.on("mouseup.dbg touchend.dbg mouseleave.dbg",function(){d.done&&d.done(),n.off("mousemove.dbg touchmove.dbg"),n.off("mouseup.dbg touchend.dbg mouseleave.dbg")})}})}},t.prototype.disable=function(){var t=e(this.element);t.off("mousedown.dbg touchstart.dbg"),n.off("mousemove.dbg touchmove.dbg mouseup.dbg touchend.dbg mouseleave.dbg")},e.fn.backgroundDraggable=function(n){var n=n,i=Array.prototype.slice.call(arguments,1);return this.each(function(){var o=e(this);if("undefined"==typeof n||"object"==typeof n){n=e.extend({},e.fn.backgroundDraggable.defaults,n);var a=new t(this,n);o.data("dbg",a)}else if("string"==typeof n&&o.data("dbg")){var a=o.data("dbg");t.prototype[n].apply(a,i)}})},e.fn.backgroundDraggable.defaults={bound:!0,axis:void 0}}(jQuery);